{{ template "header" . }}
<h1>List of tasks</h1>
<form action="/list/{{ .Page }}" method="GET">
    <label>ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" name="kw" value="{{ .Kw }}">
    <label>ã‚«ãƒ†ã‚´ãƒª</label><select name="category">
        <option value="" {{ if eq .Category "" }}selected{{ end }}>æŒ‡å®šãªã—</option>
        <option value="å®Ÿè¡Œä¸­" {{ if eq .Category "å®Ÿè¡Œä¸­" }}selected{{ end }}>å®Ÿè¡Œä¸­</option>
        <option value="ä¿ç•™ä¸­" {{ if eq .Category "ä¿ç•™ä¸­" }}selected{{ end }}>ä¿ç•™ä¸­</option> 
        <option value="èª²é¡Œ" {{ if eq .Category "èª²é¡Œ" }}selected{{ end }}>èª²é¡Œ</option> 
        <option value="ä»•äº‹" {{ if eq .Category "ä»•äº‹" }}selected{{ end }}>ä»•äº‹</option> 
        <option value="å®¶åº­" {{ if eq .Category "å®¶åº­" }}selected{{ end }}>å®¶åº­</option> 
        <option value="å­¦æ ¡" {{ if eq .Category "å­¦æ ¡" }}selected{{ end }}>å­¦æ ¡</option> 
    </select>
    <label>é”æˆçŠ¶æ³</label><select name="check_done">
        <option value="" {{ if eq .Check_done_str "" }}selected{{ end }}>æŒ‡å®šãªã—</option>
        <option value="done" {{ if eq .Check_done_str "done" }}selected{{ end }}>å®Œäº†</option>
        <option value="not_done" {{ if eq .Check_done_str "not_done" }}selected{{ end }}>æœªå®Œäº†</option>
    </select>
    <label>ã‚¿ã‚°</label><select name="tag">
        <option value="" {{ if eq .Tag_str "" }}selected{{ end }}>æŒ‡å®šãªã—</option>
        <option value="tagged" {{ if eq .Tag_str "tagged" }}selected{{ end }}>ã‚¿ã‚°ã‚ã‚Š</option>
        <option value="not_tagged" {{ if eq .Tag_str "not_tagged" }}selected{{ end }}>ã‚¿ã‚°ãªã—</option>
    </select>
    <input type="submit" value="æ¤œç´¢">
</form>
{{ if not .Tasks }}
<p>ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ï¼</p>
<p><a href="/task/new">æ–°è¦ç™»éŒ²</a></p>
<p><a href="/">ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</a></p>
{{ else }}
<table>
    <tr>
        <th>ID</th>
        <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>å„ªå…ˆåº¦</th>
        <th>ç· åˆ‡æ—¥</th>
        <th>ç™»éŒ²æ—¥</th>
        <th>çŠ¶æ…‹</th>
    </tr>
    {{ range $task := .Tasks }}
    <tr>
        <td><a href="/task/{{ $task.ID }}">{{ $task.ID }}</a></td>
        <td>{{ if $task.Tag }}ğŸ·{{ end }}{{ $task.Title }}</td>
        <td>{{ $task.Category }}</td>
        <td>{{ if eq $task.Priority "LOW" }}ä½{{ else if eq $task.Priority "MID" }}<strong>ä¸­</strong>{{ else }}<strong><font color="#FF0000">é«˜</font></strong>{{ end }}</td>
        <td>{{ $task.Deadline }}</td>
        <td>{{ $task.CreatedAt }}</td>
        <td>{{ if $task.IsDone }}æ¸ˆ{{ end }}</td>
    </tr>
    {{ end }}   
</table>
{{ if and (ne .Prev "Nothing") (ne .Next "Nothing")}}<p><a href="/list/{{ .Prev }}">æˆ»ã‚‹</a>   <a href="/list/{{ .Next }}">æ¬¡ã¸</a></p>
{{ else if ne .Prev "Nothing" }}<p><a href="/list/{{ .Prev }}">æˆ»ã‚‹</a></p>
{{ else if ne .Next "Nothing" }}<p><a href="/list/{{ .Next }}">æ¬¡ã¸</a></p>{{ end }} 
<p><a href="/task/new">æ–°è¦ç™»éŒ²</a></p>
<p><a href="/">ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</a></p>
{{ end }}
{{ template "footer" }}
